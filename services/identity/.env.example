# ============================================================
# IDENTITY SERVICE ENVIRONMENT CONFIGURATION
# ============================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control.
# ============================================================

# ------------------------------------------------------------
# APP METADATA
# ------------------------------------------------------------
# Service identifier for logging and tracing
SERVICE_NAME=identity
# Runtime environment: development | staging | production
NODE_ENV=development
# Port the service listens on
PORT=3001
# Unique instance ID for distributed tracing (auto-generated if empty)
INSTANCE_ID=

# ------------------------------------------------------------
# API CONNECTIVITY
# ------------------------------------------------------------
# Allowed origins for CORS (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3002

# ------------------------------------------------------------
# AUTHENTICATION
# ------------------------------------------------------------
# JWT signing secret (min 32 characters, use openssl rand -base64 32)
JWT_SECRET=your-jwt-secret-min-32-characters-long
# JWT access token expiry (e.g., 15m, 1h, 1d)
JWT_ACCESS_TOKEN_EXPIRY=15m
# JWT refresh token expiry (e.g., 7d, 30d)
JWT_REFRESH_TOKEN_EXPIRY=7d
# JWT issuer identifier
JWT_ISSUER=tripcomposer-identity
# JWT audience identifier
JWT_AUDIENCE=tripcomposer-platform

# ------------------------------------------------------------
# DATABASE (Supabase)
# ------------------------------------------------------------
# Supabase project URL
SUPABASE_URL=http://localhost:54321
# Supabase service role key (BACKEND ONLY - never expose to frontend)
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# ------------------------------------------------------------
# FEATURE TOGGLES
# ------------------------------------------------------------
# Enable detailed request/response logging (disable in production)
ENABLE_REQUEST_LOGGING=true
# Enable agent verification workflow
ENABLE_AGENT_VERIFICATION=true

# ------------------------------------------------------------
# OPERATIONAL LIMITS
# ------------------------------------------------------------
# Rate limit: max requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100
# Rate limit: window size in milliseconds
RATE_LIMIT_WINDOW_MS=60000
# Max failed login attempts before temporary lockout
MAX_LOGIN_ATTEMPTS=5
# Account lockout duration in seconds after max failed attempts
ACCOUNT_LOCKOUT_DURATION_SECONDS=900

# ------------------------------------------------------------
# AUDIT / OBSERVABILITY
# ------------------------------------------------------------
# Event bus URL for publishing audit events
EVENT_BUS_URL=http://localhost:4000/events
# Event bus authentication token
EVENT_BUS_AUTH_TOKEN=your-event-bus-auth-token
# Log level: debug | info | warn | error
LOG_LEVEL=info
