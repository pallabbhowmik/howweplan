# ==============================================================================
# NOTIFICATION SERVICE - Environment Configuration
# ==============================================================================
# This file contains all environment variables required by the notification service.
# Copy this file to .env and fill in the values for your environment.
# NEVER commit real secrets to version control.
# ==============================================================================

# ------------------------------------------------------------------------------
# APP METADATA
# ------------------------------------------------------------------------------
NODE_ENV=development
SERVICE_NAME=notifications
SERVICE_VERSION=1.0.0
LOG_LEVEL=info

# ------------------------------------------------------------------------------
# API CONNECTIVITY
# ------------------------------------------------------------------------------
# Port the service listens on
PORT=3005

# Internal service communication
EVENT_BUS_URL=amqp://localhost:5672
EVENT_BUS_EXCHANGE=tripcomposer.events
EVENT_BUS_QUEUE=notifications.events

# ------------------------------------------------------------------------------
# DATABASE
# ------------------------------------------------------------------------------
# Delivery logs and idempotency tracking
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/tripcomposer_notifications
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ------------------------------------------------------------------------------
# EMAIL PROVIDER (Resend)
# ------------------------------------------------------------------------------
# Resend is recommended for free-tier friendly email delivery
EMAIL_PROVIDER=resend
RESEND_API_KEY=re_development_key
EMAIL_FROM_ADDRESS=noreply@howweplan.local
EMAIL_FROM_NAME=HowWePlan
EMAIL_REPLY_TO=support@howweplan.local

# ------------------------------------------------------------------------------
# SMS PROVIDER (Twilio) - Placeholder
# ------------------------------------------------------------------------------
SMS_PROVIDER=twilio
SMS_ENABLED=false
TWILIO_ACCOUNT_SID=AC_development_sid
TWILIO_AUTH_TOKEN=development_auth_token
TWILIO_FROM_NUMBER=+15555555555

# ------------------------------------------------------------------------------
# PUSH NOTIFICATIONS (Firebase) - Placeholder
# ------------------------------------------------------------------------------
PUSH_PROVIDER=firebase
PUSH_ENABLED=false
FIREBASE_PROJECT_ID=tripcomposer-dev
FIREBASE_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nDEVELOPMENT_KEY\n-----END PRIVATE KEY-----
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@tripcomposer-dev.iam.gserviceaccount.com

# ------------------------------------------------------------------------------
# OPERATIONAL LIMITS
# ------------------------------------------------------------------------------
# Rate limiting per recipient
RATE_LIMIT_EMAIL_PER_HOUR=20
RATE_LIMIT_SMS_PER_HOUR=10
RATE_LIMIT_PUSH_PER_HOUR=50

# Retry configuration
MAX_RETRY_ATTEMPTS=3
RETRY_BACKOFF_MS=1000
RETRY_BACKOFF_MULTIPLIER=2

# Batch processing
BATCH_SIZE=100
BATCH_INTERVAL_MS=5000

# ------------------------------------------------------------------------------
# FEATURE TOGGLES
# ------------------------------------------------------------------------------
ENABLE_EMAIL=true
ENABLE_SMS=false
ENABLE_PUSH=false
ENABLE_DELIVERY_TRACKING=true

# ------------------------------------------------------------------------------
# AUDIT / OBSERVABILITY
# ------------------------------------------------------------------------------
AUDIT_LOG_ENABLED=true
AUDIT_EVENT_EXCHANGE=tripcomposer.audit

# Health check endpoint
HEALTH_CHECK_PATH=/health

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9105
