# ============================================================================
# BOOKING-PAYMENTS SERVICE - ENVIRONMENT CONFIGURATION
# ============================================================================
# This service is the Merchant of Record for all payment processing.
# It handles Stripe integration, escrow states, and refund enforcement.
# ============================================================================

# ----------------------------------------------------------------------------
# APP METADATA
# ----------------------------------------------------------------------------
# Service identification and runtime configuration
NODE_ENV=development
SERVICE_NAME=booking-payments
SERVICE_VERSION=1.0.0
PORT=3003
LOG_LEVEL=info

# ----------------------------------------------------------------------------
# API CONNECTIVITY
# ----------------------------------------------------------------------------
# Internal service communication endpoints
EVENT_BUS_URL=http://localhost:4000/events
EVENT_BUS_API_KEY=dev-event-bus-key-change-in-production

# ----------------------------------------------------------------------------
# AUTHENTICATION
# ----------------------------------------------------------------------------
# Service-to-service authentication
INTERNAL_API_KEY=dev-internal-api-key-change-in-production
JWT_SECRET=dev-jwt-secret-minimum-32-characters-change-in-production

# ----------------------------------------------------------------------------
# DATABASE
# ----------------------------------------------------------------------------
# Supabase connection for booking and payment records
SUPABASE_URL=http://localhost:54321
SUPABASE_SERVICE_ROLE_KEY=dev-service-role-key-change-in-production
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

# ----------------------------------------------------------------------------
# PAYMENTS (STRIPE)
# ----------------------------------------------------------------------------
# Stripe API credentials - SECRET KEY ONLY IN THIS SERVICE
STRIPE_SECRET_KEY=sk_test_your_test_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
STRIPE_API_VERSION=2023-10-16

# ----------------------------------------------------------------------------
# FEATURE TOGGLES
# ----------------------------------------------------------------------------
# Enable/disable service capabilities
ENABLE_LIVE_PAYMENTS=false
ENABLE_AUTOMATIC_REFUNDS=false
ENABLE_DISPUTE_WEBHOOKS=true

# ----------------------------------------------------------------------------
# OPERATIONAL LIMITS
# ----------------------------------------------------------------------------
# Business rule thresholds (monetary values in cents)
MIN_BOOKING_AMOUNT_CENTS=1000
MAX_BOOKING_AMOUNT_CENTS=10000000
PLATFORM_COMMISSION_RATE=0.10
BOOKING_FEE_RATE=0.029
BOOKING_FEE_FIXED_CENTS=30
ESCROW_HOLD_DAYS=14
REFUND_WINDOW_DAYS=30
IDEMPOTENCY_TTL_SECONDS=86400

# ----------------------------------------------------------------------------
# AUDIT / OBSERVABILITY
# ----------------------------------------------------------------------------
# Logging, tracing, and compliance
AUDIT_LOG_ENABLED=true
AUDIT_RETENTION_DAYS=2555
ENABLE_TRACING=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
SENTRY_DSN=
